<?xml version="1.0" encoding="UTF-8"?>
<templates id="template" xml:space="preserve">
    <t t-name="construction.ConstructionDashboard">
        <div class="o_construction_dashboard">
            <div class="o_dashboard_header d-flex justify-content-center align-items-center">
                <h2 class="dashboard-title">Construction Management Dashboard</h2>
            </div>

            <t t-if="state.loading">
                <div class="o_loader">Loading construction metrics...</div>
            </t>
            <t t-else="">
                <!-- KPIs -->
                <div class="o_construction_kpis">
                    <div class="kpi" t-on-click="() => this.openModel('construction.project')">
                        <div class="kpi-icon"><i class="fa fa-book"></i></div>
                        <div class="kpi-content">
                            <div class="kpi-label">Total Projects</div>
                            <div class="kpi-value"><t t-esc="state.kpis.totalProjects"/></div>
                        </div>
                    </div>
                    <div class="kpi">
                        <div class="kpi-icon"><i class="fa fa-money"></i></div>
                        <div class="kpi-content">
                            <div class="kpi-label">Total Estimated Expenses of Projects</div>
                            <div class="kpi-value"><t t-esc="state.kpis.totalProjectCosts"/></div>
                        </div>
                    </div>
                    <div class="kpi">
                        <div class="kpi-icon"><i class="fa fa-calculator"></i></div>
                        <div class="kpi-content">
                            <div class="kpi-label">Total Actual Expenses of Projects</div>
                            <div class="kpi-value"><t t-esc="state.kpis.actualProjectCosts"/></div>
                        </div>
                    </div>
                    <div class="kpi">
                        <div class="kpi-icon"><i class="fa fa-money"></i></div>
                        <div class="kpi-content">
                            <div class="kpi-label">Cost Variance</div>
                            <div class="kpi-value" t-att-class="state.kpis.varianceCosts >= 0 ? 'text-danger' : 'text-success'">
                                <t t-esc="state.kpis.varianceCosts || 0"/></div>
                        </div>
                    </div>
                </div>

                <div class="o_construction_main_content">
                    <div class="chart-container"><canvas id="projectProgressChart" width="400" height="300"></canvas></div>
                    <div class="chart-container"><canvas id="assetsEstimationChart" width="400" height="300"></canvas></div>
                    <div class="chart-container"><canvas id="costComparison" width="400" height="300"></canvas></div>
                    <div class="chart-container"><canvas id="costBreakdownChart" width="400" height="300"></canvas></div>
                    <div class="chart-container"><canvas id="equipmentAllocationChart" width="400" height="300"></canvas></div>
                    <div class="chart-container"><canvas id="inventoryAllocationChart" width="400" height="300"></canvas></div>
                </div>
            </t>
        </div>
    </t>
</templates>
